<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swipe Pages</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="assets/images/logo.webp" alt="Logo" width="30" height="30" class="d-inline-block align-text-top">
                HAL-10000
            </a>
        </div>
    </nav>

    <!-- Main content -->
    <div id="carousel" class="carousel slide vh-100" data-bs-interval="false" data-bs-touch="true" data-bs-wrap="false">
        <div class="carousel-inner h-100">
            <!-- Page 1 - Article -->
            <div class="carousel-item active h-100">
                <div class="container h-100 overflow-auto">
                    <div id="article-content" class="py-4"></div>
                </div>
            </div>

            <!-- Page 2 - Quiz -->
            <div class="carousel-item h-100">
                <div class="container h-100 overflow-auto">
                    <div id="quiz-container" class="py-4"></div>
                </div>
            </div>

            <!-- Page 3 - Video -->
            <div class="carousel-item h-100">
                <div class="container h-100 d-flex align-items-center">
                    <video id="video-player" class="w-100" controls>
                        Your browser does not support the video tag.
                    </video>
                </div>
            </div>
        </div>
    </div>

    
    <!-- Footer -->
    <footer class="bg-dark text-white py-3">
        <div class="container text-center">
            <small>Created by HAL-10000 for InnoVAT2025</small>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Load article content
        fetch('article-content-deepsongai.html')
            .then(response => response.text())
            .then(data => document.getElementById('article-content').innerHTML = data);

        // Load quiz
        fetch('quiz-data.json')
            .then(response => response.json())
            .then(data => {
                const container = document.getElementById('quiz-container');
                container.innerHTML = `
                    <h2>${data.question}</h2>
                    <div class="list-group mt-3">
                        ${data.answers.map((answer, index) => `
                            <button type="button" 
                                    class="list-group-item list-group-item-action" 
                                    onclick="checkAnswer(${index})">
                                ${answer.text}
                            </button>
                        `).join('')}
                    </div>
                    <div id="feedback" class="mt-3"></div>
                `;
            });

        // Load video
        fetch('video-path.txt')
            .then(response => response.text())
            .then(path => {
                document.getElementById('video-player').innerHTML = `
                    <source src="${path}" type="video/mp4">
                `;
            });

        function checkAnswer(index) {
            fetch('quiz-data.json')
                .then(response => response.json())
                .then(data => {
                    const feedback = document.getElementById('feedback');
                    if(data.answers[index].correct) {
                        feedback.innerHTML = `<div class="alert alert-success">${data.successMessage}</div>`;
                    } else {
                        feedback.innerHTML = `<div class="alert alert-danger">${data.errorMessage}</div>`;
                    }
                });
        }

        // Swipe detection
        let touchstartX = 0;
        let touchendX = 0;

        document.addEventListener('touchstart', e => {
            touchstartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', e => {
            touchendX = e.changedTouches[0].screenX;
            const carousel = new bootstrap.Carousel(document.getElementById('carousel'));
            
            if (touchendX < touchstartX - 50) carousel.next();
            if (touchendX > touchstartX + 50) carousel.prev();
        });
    </script>
</body>
</html>